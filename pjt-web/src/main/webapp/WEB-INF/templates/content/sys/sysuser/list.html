<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>sysuserlist</title>
		<base href="$!{ctx}" />
		<link rel="stylesheet" href="static/layui/plugins/layui/css/layui.css" media="all" />
		<link rel="stylesheet" href="static/layui/css/main.css" />
	</head>
	<body>
		<div class="admin-main">
			<blockquote class="layui-elem-quote">
			   <div class="layui-inline">
			     <label class="layui-form-label">用户名称</label>
			     <div class="layui-input-inline" style="width: 150px;">
			       <input type="text" name="" autocomplete="off" class="layui-input">
			     </div>
			   </div>
			   <a href="javascript:;" class="layui-btn" id="search">
				  <i class="layui-icon">&#xe615;</i> 搜索
			   </a>
			   <a href="sys/adduser.htm" class="layui-btn" >
				  <i class="layui-icon">&#xe608;</i> 添加信息
			   </a>
			</blockquote>
			<fieldset class="layui-elem-field">
				<legend>数据列表</legend>
					<div class="layui-field-box">
						<table class="layui-table">
					        <thead>
					            <tr>
					            	<th>管理员登录名称</th>
					            	<th>管理员昵称</th>
					            	<th>角色</th>
					            	<th>最后一次登录时间</th>
									<th>操作</th>
							   </tr>
					        </thead>
					        <tbody>
							#foreach($element in $pageInfo.list)
								<tr>
								<td>$!{element.loginName}</td>
								<td>$!{element.niceName}</td>
								<td>$!{element.roleId}</td>
								<td>$date.format('yyyy-MM-dd HH:mm:ss ',$!element.lastLoginTime)</td>
								<td>
									<a href="/user/updateuser.htm?userId=${element.id}" class="layui-btn layui-btn-mini " ><i class="layui-icon">&#xe642;</i>修改</a>
								</td>
							</tr>
							 #end
					        </tbody>
						</table>
					</div>
			</fieldset>	
			<div class="layui-laypage"  style="position: relative; left: 35%;">
				#parse("/content/sys/page.html")
			</div>
		</div>
		<script type="text/javascript" src="/static/js/front.app.js"></script>
		<script>
		layui.use('layer', function(){ //独立版的layer无需执行这一句
		  var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句
		  
		  //触发事件
		  var active = {
		    offset: function(othis){
		      var type = othis.data('type');
		      layer.open({
		        type: 2
		        ,offset: type 
		        ,title: '添加管理员'
		        ,area: ['1000px', '800px']
		        ,id: 'addBtn'+type //防止重复弹出
		        ,content: '/user/adduser.htm'
		        ,btnAlign: 'c' //按钮居中
		        ,shade: 0 //不显示遮罩
		        ,zIndex: layer.zIndex 
		        ,success: function(layero){
		          layer.setTop(layero); 
		        }
		      });
		    }
		  };
		  $('#addBtn .layui-btn').on('click', function(){
		    var othis = $(this), method = othis.data('method');
		    active[method] ? active[method].call(this, othis) : '';
		  });
		  var actives = {
				    offset: function(othis){
				      var type = othis.data('type');
				      layer.open({
				        type: 2
				        ,offset: type 
				        ,title: '修改管理员'
				        ,area: ['1000px', '800px']
				        ,id: 'editBtn'+type //防止重复弹出
				        ,content: '/user/updateuser.htm'
				        ,btnAlign: 'c' //按钮居中
				        ,shade: 0 //不显示遮罩
				        ,zIndex: layer.zIndex 
				        ,success: function(layero){
				          layer.setTop(layero); 
				        }
				      });
				    }
				  };
		  $('.editBtn .layui-btn').on('click', function(){
		    var othis = $(this), method = othis.data('method');
		    actives[method] ? actives[method].call(this, othis) : '';
		  });
		});
		</script>
	</body>

</html>
