<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>Table</title>
		<base href="$!{ctx}" />
		<link rel="stylesheet" href="/static/layui/plugins/layui/css/layui.css" media="all" />
		<link rel="stylesheet" href="/static/layui/plugins/font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="/static/layui/css/table.css" />
	</head>
	<body>
		 <div class="admin-main" style="padding-left: 10px;">
		 	<blockquote class="layui-elem-quote">
		 		<form action="/user/userlist.htm">
				  <div class="layui-inline">
				    <label class="layui-form-label">用户名称</label>
				    <div class="layui-input-inline" style="width: 150px;">
				      <input type="search" name="userName" autocomplete="off" class="layui-input">
				    </div>
				  </div>
				<button class="layui-btn" type="submit">
					<i class="layui-icon">&#xe615;</i> 搜索
				</button>
				<a href="/user/adduser.htm" class="layui-btn"  >
					<i class="layui-icon">&#xe608;</i> 添加信息
				</a>
			</blockquote>
			<fieldset class="layui-elem-field">
				<legend>数据列表</legend>
					 <div class="layui-field-box">
						<table class="layui-table">
					        <thead>
					            <tr>
					            	<th>用户编号</th>
					            	<th>用户名称</th>
					            	<th>用户密码</th>
									<th>操作</th>
							   </tr>
					        </thead>
					        <tbody>
							#foreach($element in $pageInfo.list)
								<tr class="" >
								<td>$!{element.id}</td>
								<td>$!{element.userName}</td>
								<td>$!{element.userPwd}</td>
								<td>
								<a href="/user/updateuser.htm?userId=${element.id}" class="layui-btn layui-btn-mini " ><i class="layui-icon">&#xe642;</i>修改</a>
								<button onclick="del($!{element.id})" class="layui-btn layui-btn-mini layui-btn-danger" page="$!{pageInfo.page}"  atr="$!{element.id}" uname="$!{element.userName}"><i class="layui-icon">&#x1006;</i>删除</button>									
								</td>
							</tr>
							 #end
					       </tbody>
						</table>
					</div>
			</fieldset>	
			<div class="layui-laypage" style="position: relative; left: 35%;">
				<div id="page" class="page">
				</div>
			</div>
		</div>
		<script type="text/javascript" src="/static/js/front.app.js"></script>
		<script>
			function del(id){
				debugger;
				MsgUtil.cfm({msg:"是否删除编号是"+id+"的记录？",
					yes:function(){
						var req = new Request();
						req.post({
							url:"/user/deleteuser.htm",
							param:{userId:id},
							suc:function(rslt){
								MsgUtil.info('success');
							}
						});
					}
				});
			}
			layui.use( 'laypage', function() {
				var $ = layui.jquery,
					laypage = layui.laypage,
					layer = parent.layer === undefined ? layui.layer : parent.layer;
				var pages = ${pageInfo.pages};
				var first = ${pageInfo.firstPage};
				var last = ${pageInfo.lastPage};
				var curr = ${pageInfo.pageNum};
					  
				//page
				laypage({
					cont: 'page'
					,pages: pages //总页数
					,groups: 5//连续显示分页数
					,curr: curr || 1
					,jump: function(cuur, first) {
						//得到了当前页，用于向服务端请求对应数据
						if(!first) {
							//layer.msg('第 '+ obj.curr +' 页');
							//location.href = 'curr='+curr;
						}
					}
				});
			});
		</script>
	</body>
</html>